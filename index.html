<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="main">
        <div class="top-bar">
            <div class="dot red"></div>
            <div class="dot amber"></div>
            <div class="dot green"></div>
        </div>
        <div class="window">
            <div class="content">
                <h1 class="title">API DOLAR BLUE</h1>

                <li class="divisas" id="dolar-oficial-compra">Dolar Oficial Venta: </li>
                <li class="divisas" id="dolar-oficial-promedio">Dolar Oficial Promedio: </li>
                <li class="divisas" id="dolar-oficial-venta">Dolar Oficial Compra: </li>
                <br><br>
                <li class="divisas" id="dolar-blue-compra">Dolar Blue Venta: </li>
                <li class="divisas" id="dolar-blue-promedio">Dolar Blue Promedio: </li>
                <li class="divisas" id="dolar-blue-venta">Dolar Blue Compra: </li>

                <div id="hora"></div>
            </div>
        </div>
    </div>

    <script src="main.js" async defer></script>
    <script>
        const url = 'https://api.bluelytics.com.ar/v2/latest';

        fetch(url)
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('No se pudo obtener la información de las cotizaciones');
                }
            })
            .then(data => {
                // Aquí procesas los datos como quieras
                console.log(data);

                // Accede a las propiedades de la respuesta JSON y actualiza los elementos HTML con los valores correspondientes
                document.getElementById('dolar-oficial-compra').textContent += data.oficial.value_buy;
                document.getElementById('dolar-oficial-promedio').textContent += data.oficial.value_avg;
                document.getElementById('dolar-oficial-venta').textContent += data.oficial.value_sell;

                document.getElementById('dolar-blue-compra').textContent += data.blue.value_buy;
                document.getElementById('dolar-blue-promedio').textContent += data.blue.value_avg;
                document.getElementById('dolar-blue-venta').textContent += data.blue.value_sell;
            })
            .catch(error => console.error(error));

        // Obtener la fecha y hora actual
        let now = new Date();

        // Formatear la fecha y hora actual
        let options = { year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };
        let fecha_hora_actual = now.toLocaleString('es-ES', options); // Puedes cambiar el idioma y las opciones de formato según tus preferencias

        // Seleccionar el elemento HTML
        let divHora = document.querySelector('#hora');

        // Actualizar el contenido del elemento HTML con la fecha y hora actual
        divHora.innerHTML = "*** Cotizaciones actualizadas a la fecha: " + fecha_hora_actual;

    </script>
</body>

</html>